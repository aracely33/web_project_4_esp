!function(){var t={240:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me",{headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"getInitialCards",value:function(){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards",{headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleEditProfile",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me",{method:"PATCH",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t.nombre),about:"".concat(t.ocupaciÃ³n)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleAddCard",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards ",{method:"POST",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t.title),link:"".concat(t.image)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleDeleteCard",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/".concat(t),{method:"DELETE",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleLikeClick",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/likes/".concat(t),{method:"PUT",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleUnLikeClick",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/likes/".concat(t),{method:"DELETE",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleChangeAvatar",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me/avatar",{method:"PATCH",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(t.avatar)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},383:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n}var e,r;return e=t,(r=[{key:"_setEventListeners",value:function(t,e){var n=this;this._formElement=t,this._config=e;var r=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),o=t.querySelector(this._config.submitButtonSelector);this._toggleButtonState(r,o,this._config),this._formElement.addEventListener("reset",(function(){setTimeout((function(){n._toggleButtonState(r,o,n._config)}),0)})),r.forEach((function(t){t.addEventListener("input",(function(e){n._checkInputValidity(n._formElement,t),n._toggleButtonState(r,o,n._config)}))}))}},{key:"_disableButton",value:function(t,e){t.classList.add(e.inactiveButtonClass),t.setAttribute("disabled",!0)}},{key:"_ableButton",value:function(t,e){t.classList.remove(e.inactiveButtonClass),t.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(t,e,n){this._hasInvalidInput(t)?this._disableButton(e,n):this._ableButton(e,n)}},{key:"_checkInputValidity",value:function(t,e){e.validity.valid?this._hideInputError(t,e,this._config):this._showInputError(t,e,e.validationMessage,this._config)}},{key:"_showInputError",value:function(t,e,n,r){var o=t.querySelector(".".concat(e.id,"-error"));e.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}},{key:"_hideInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners(this._formElement,this._config)}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},4:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._popupElement=document.querySelector(this._popup),this._handleCloseButton=this._handleCloseButton.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._handleTap=this._handleTap.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this.setEventListeners()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleTap),document.removeEventListener("click",this._handleCloseButton)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&(console.log("estas dentro del if de handleEscClose"),this._popupElement=document.querySelector(".popup_opened"),this.close())}},{key:"_handleTap",value:function(t){var e=t.target.classList.contains("popup");this._popupElement=t.target,e&&this.close()}},{key:"_handleCloseButton",value:function(t){var e=t.target.classList.contains("close-button");this._popupElement=document.querySelector(".popup_opened"),e&&this.close()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleTap),document.addEventListener("click",this._handleCloseButton)}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},1:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},i.apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,t);var e,n,r,u,f=(r=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(u){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function p(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,n))._formElement=e._popupElement.querySelector(".form"),e._handleFormSubmit=r,e._popupFormSubmit=e._popupFormSubmit.bind(l(e)),e}return e=p,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._formElement.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"_popupFormSubmit",value:function(t){t.preventDefault(),t.target.querySelector(".form__Button").textContent="Guardando...",this._handleFormSubmit(this._getInputValues()),this._formElement.reset(),t.target.querySelector(".form__Button").textContent="Guardar",this.close()}},{key:"setEventListeners",value:function(){i(s(p.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._popupFormSubmit)}},{key:"close",value:function(){this._formElement.removeEventListener("submit",this._popupFormSubmit),i(s(p.prototype),"close",this).call(this)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(n(4));t.exports=f},584:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=a(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},u.apply(this,arguments)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,t);var e,n,r,a,f=(r=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(a){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return l(this,t)});function p(){return o(this,p),f.apply(this,arguments)}return e=p,(n=[{key:"open",value:function(t){this._popupElement.querySelector(".popup__image").src=t.target.src;var e=this._popupElement.querySelector(".popup__imagedescription"),n=t.target.alt;e.textContent=n,u(s(p.prototype),"open",this).call(this)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(n(4));t.exports=f},411:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"setItems",value:function(t){this._renderedItems=t}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},840:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameSelector=e,this._userJobSelector=n,this._userAvatarSelector=r,this._userNameContainer=document.querySelector(this._userNameSelector),this._userJobContainer=document.querySelector(this._userJobSelector),this._userAvatarContainer=document.querySelector(this._userAvatarSelector)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._userNameContainer.textContent,job:this._userJobContainer.textContent,avatar:this._userAvatarContainer.style.backgroundImage}}},{key:"setUserInfo",value:function(t){this._userNameContainer.textContent=t.name,this._userJobContainer.textContent=t.about,this._userAvatarContainer.style.backgroundImage="url(".concat(t.avatar,")")}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},177:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._title=e.title,this._image=e.url,this._selector=r,this._handleCardClick=n,this._handleTrashButton=o,this._handleLikeButtonClick=i}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"_addEventListeners",value:function(){this._element=this._getTemplate(),this._element.querySelector(".item__trash-button").addEventListener("click",this._handleTrashButton),this._element.querySelector(".item__place").addEventListener("click",this._handleCardClick),this._element.querySelector(".item__place-like-button").addEventListener("click",this._handleLikeButtonClick)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._addEventListeners(),this._element.querySelector(".item__likes-number").textContent=this._data.likes.length,this._element.querySelector(".item__place").src=this._image,this._element.querySelector(".item__place-info-name").textContent=this._title,this._element.querySelector(".item__place").alt=this._title,this._element}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},575:function(t,e){e.addNewPlaceButton=document.querySelector(".profile__add-button"),e.profileEditButton=document.querySelector(".profile__info-edit-button"),e.avatarEditButton=document.querySelector(".profile__avatar-edit-button"),e.avatarImage=document.querySelector(".profile__avatar-container"),e.formButton=document.querySelector(".form__Button"),e.forms=document.querySelectorAll(".form"),e.placesSelector=".gallery",e.profileSelector=".profile__info"},209:function(t){t.exports=function(t){t.open()}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.p="",function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,n,r){return(n=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}n.p;var i=n(575),u=n(411),a=n(177),c=n(209),l=n(383),s=n(584),f=n(1),p=n(840),y=new(n(240))({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_02",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"}}),m=new p(".profile__info-name",".profile__info-occupation",".profile__avatar-container");function h(t){return new a(t,(function(t){new s(".popup_type-image").open(t)}),".template__place",(function(e){var n=new f({popupSelector:".popup_type-form-delete-card-ask",handleFormSubmit:function(){y.handleDeleteCard(t._id).then((function(t){e.target.parentElement.remove()}))}});c(n)}),(function(e){var n=e.target.classList.contains("item__place-like-button_active");e.target.classList.toggle("item__place-like-button_active"),n?y.handleUnLikeClick(t._id).then((function(t){e.target.parentElement.querySelector(".item__likes-number").textContent=t.likes.length})):y.handleLikeClick(t._id).then((function(t){e.target.parentElement.querySelector(".item__likes-number").textContent=t.likes.length}))}))}y.getUserInfo().then((function(t){m.setUserInfo(t)}));var b=new u({renderer:function(t){var e="006f3087a8e18511dd8656b8",n=t.likes.some((function(t){return t._id===e})),r=t.owner._id===e,o=h(t).generateCard(),i=o.querySelector(".item"),u=o.querySelector(".item__trash-button"),a=o.querySelector(".item__place-like-button");r||i.removeChild(u),b.addItem(o),n&&a.classList.add("item__place-like-button_active")}},i.placesSelector),d=(y.getInitialCards().then((function(t){var e=t.map((function(t){return r(r({},t),{},{title:t.name,url:t.link})}));b.setItems(e),b.renderItems()})),new f({popupSelector:".popup_type-form-new-profile",handleFormSubmit:function(t){y.handleEditProfile(t).then((function(t){y.getUserInfo().then((function(t){m.setUserInfo(t)}))}))}})),v=new f({popupSelector:".popup_type-form-new-place",handleFormSubmit:function(t){y.handleAddCard(t).then((function(t){var e=h(r(r({},t),{},{title:t.name,url:t.link})).generateCard();document.querySelector(i.placesSelector).prepend(e)}))}}),_=new f({popupSelector:".popup_type-form-change-profile-avatar",handleFormSubmit:function(t){y.handleChangeAvatar(t).then((function(e){i.avatarImage.style.backgroundImage="url(".concat(t.avatar,")")})).finally((function(){document.querySelector(".popup_type-form-change-profile-avatar").querySelector(".form__Button").textContent="Guardar"}))}});i.forms.forEach((function(t){new l({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t).enableValidation()})),i.profileEditButton.addEventListener("click",(function(){c(d)})),i.addNewPlaceButton.addEventListener("click",(function(){c(v)})),i.avatarEditButton.addEventListener("click",(function(){c(_)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxTQUNHcEMsY0FBYywwQ0FDZEEsY0FBYyxpQkFBaUIyQixZQUFjLFNBQ2xELEdBQ0osSUFJRm1HLEVBQVdaLE1BQU03RyxTQUFRLFNBQUMrSixHQUNQLElBQUkvSyxFQUNuQixDQUNFZ0wsYUFBYyxlQUNkdkssY0FBZSxnQkFDZkcscUJBQXNCLGlCQUN0QlUsb0JBQXFCLHlCQUNyQmUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx3QkFFZHdJLEdBRU9FLGtCQUNYLElBY0V4QyxFQUFXaEIsa0JBQWtCM0csaUJBQWlCLFNBVGhELFdBQ0U0SCxFQUFVeUIsRUFDWixJQVFFMUIsRUFBV2pCLGtCQUFrQjFHLGlCQUFpQixTQWJoRCxXQUNFNEgsRUFBVWdDLEVBQ1osSUFZRWpDLEVBQVdmLGlCQUFpQjVHLGlCQUFpQixTQVAvQyxXQUNFNEgsRUFBVWtDLEVBQ1osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb25zdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wMi91c2Vycy9tZVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvY2FyZHNcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdHJvcyBtw6l0b2RvcyBwYXJhIHRyYWJhamFyIGNvbiBsYSBBUElcclxuXHJcbiAgaGFuZGxlRWRpdFByb2ZpbGUodmFsdWUpIHtcclxuICAgIHJldHVybiBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvdXNlcnMvbWVcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IFwiMzhiZTQ0YjAtZTkwOS00NTc1LWJhOTMtZDY3N2U0OTdmMTdhXCIsXHJcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGAke3ZhbHVlLm5vbWJyZX1gLFxyXG4gICAgICAgICAgYWJvdXQ6IGAke3ZhbHVlLm9jdXBhY2nDs259YCxcclxuICAgICAgICB9KSxcclxuICAgICAgfVxyXG4gICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkQ2FyZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzIFwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogYCR7dmFsdWUudGl0bGV9YCxcclxuICAgICAgICBsaW5rOiBgJHt2YWx1ZS5pbWFnZX1gLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzLyR7Y2FyZElkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlQ2xpY2soY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgICkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVVuTGlrZUNsaWNrKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDaGFuZ2VBdmF0YXIodmFsdWUpIHtcclxuICAgIHJldHVybiBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvdXNlcnMvbWUvYXZhdGFyXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhdmF0YXI6IGAke3ZhbHVlLmF2YXRhcn1gLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFwaTtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vVGllbmUgbcOpdG9kb3MgcHJpdmFkb3MgcGFyYTpcclxuICAvL2FncmVnYXIgdG9kb3MgbG9zIGNvbnRyb2xhZG9yZXMgbmVjZXNhcmlvcy4qKioqKioqKioqXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHRoaXMuX2NvbmZpZyk7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgLy8gJ3NldFRpbWVvdXQnIGVzIG5lY2VzYXJpbyBwYXJhIGVzcGVyYXIgYSBxdWUgc2UgYm9ycmUgZWwgZm9ybXVsYXJpbyAobGEgbGxhbWFkYSBkZXNhcGFyZWNlcsOhIGFsIGZpbmFsIGRlIGxhIHBpbGEpIHkgc29sbyBlbnRvbmNlcyBsbGFtYXIgYSBgdG9nZ2xlQnV0dG9uU3RhdGVgXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICAgICAgfSwgMCk7IC8vIGJhc3RhIGNvbiBlc3BlY2lmaWNhciAwIG1pbGlzZWd1bmRvcyBwYXJhIHF1ZSBkZXNwdcOpcyBkZSBgcmVzZXRgIHNlIGFjdGl2ZSBsYSBhY2Npw7NuXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eSh0aGlzLl9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHRoaXMuX2NvbmZpZyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL2NhbWJpYXIgZWwgZXN0YWRvIGRlbCBib3TDs24gU3VibWl0KioqKioqKioqKipcclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIF9hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL2NvbXByb2JhciBsYSB2YWxpZGV6IGRlbCBjYW1wbyoqKioqKioqKioqKipcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKFxyXG4gICAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICAgIGlucHV0RWxlbWVudCxcclxuICAgICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXHJcbiAgICAgICAgdGhpcy5fY29uZmlnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vQWN0aXZhciBsYSB2YWxpZGFjacOzblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtRWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXApO1xyXG4gICAgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24gPSB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlVGFwID0gdGhpcy5faGFuZGxlVGFwLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVRhcCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyphbG1hY2VuYSBsYSBsw7NnaWNhIHBhcmEgY2VycmFyIGVsIHBvcHVwIGFsIHB1bHNhciBsYSB0ZWNsYSBFc2MuKi9cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJlc3RhcyBkZW50cm8gZGVsIGlmIGRlIGhhbmRsZUVzY0Nsb3NlXCIpO1xyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKmFsbWFjZW5hIGxhIGzDs2dpY2EgcGFyYSBjZXJyYXIgZWwgcG9wdXAgYWwgcHVsc2FyIHRhcCBlbiBsYSBzdXBlcnBvc2ljacOzbi4qL1xyXG5cclxuICBfaGFuZGxlVGFwKGV2dCkge1xyXG4gICAgY29uc3QgdGFwID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGV2dC50YXJnZXQ7XHJcbiAgICBpZiAodGFwKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbG9zZUJ1dHRvbihldnQpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2xvc2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9vcGVuZWRcIik7XHJcblxyXG4gICAgaWYgKGJ1dHRvbikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL3F1ZSBhZ3JlZ2EgdW4gZGV0ZWN0b3IgZGUgZXZlbnRvcyBkZSBjbGljayBhbCBpY29ubyBjZXJyYXIgZGVsIHBvcHVwXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlVGFwKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbik7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvcHVwO1xyXG4iLCJjb25zdCBQb3B1cCA9IHJlcXVpcmUoXCIuL1BvcHVwXCIpO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAvL2xsZXZhIHVuIGNhbGxiYWNrIGRlbCBlbnbDrW8gZGVsIGZvcm11bGFyaW8gYWwgY29uc3RydWN0b3IsIGFzw60gY29tbyBlbCBzZWxlY3RvciBwb3B1cC5cclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybVN1Ym1pdCA9IHRoaXMuX3BvcHVwRm9ybVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKFxyXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBfcG9wdXBGb3JtU3VibWl0KGV2dCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fQnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJHdWFyZGFuZG8uLi5cIjtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICBldnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fQnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcblxyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9wb3B1cEZvcm1TdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgLy9tb2RpZmljYSBlbCBtw6l0b2RvIHBhZHJlIGNsb3NlKCkgcGFyYSByZWluaWNpYXIgIGVsIGZvcm11bGFyaW9oYSBjdWFuZG8gY2VycmFkbyBlbCBwb3B1cC5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fcG9wdXBGb3JtU3VibWl0KTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvcHVwV2l0aEZvcm07XHJcbiIsIi8vaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmNvbnN0IFBvcHVwID0gcmVxdWlyZShcIi4vUG9wdXBcIik7XHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIG9wZW4oZXZ0KSB7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIGltYWdlLnNyYyA9IGV2dC50YXJnZXQuc3JjO1xyXG4gICAgY29uc3QgaW1hZ2VEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9faW1hZ2VkZXNjcmlwdGlvblwiXHJcbiAgICApO1xyXG4gICAgY29uc3QgaW1hZ2VMZWdlbmQgPSBldnQudGFyZ2V0LmFsdDtcclxuICAgIGltYWdlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpbWFnZUxlZ2VuZDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbXMoZGF0YSkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNlY3Rpb247XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVTZWxlY3RvciA9IHVzZXJOYW1lU2VsZWN0b3I7XHJcbiAgICB0aGlzLl91c2VySm9iU2VsZWN0b3IgPSB1c2VySm9iU2VsZWN0b3I7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyU2VsZWN0b3IgPSB1c2VyQXZhdGFyU2VsZWN0b3I7XHJcbiAgICB0aGlzLl91c2VyTmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VySm9iQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl91c2VySm9iU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3VzZXJBdmF0YXJTZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVDb250YWluZXIudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fdXNlckpvYkNvbnRhaW5lci50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl91c2VyQXZhdGFyQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhpdGVtKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUNvbnRhaW5lci50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2JDb250YWluZXIudGV4dENvbnRlbnQgPSBpdGVtLmFib3V0O1xyXG4gICAgdGhpcy5fdXNlckF2YXRhckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7aXRlbS5hdmF0YXJ9KWA7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXJJbmZvO1xyXG4iLCIvL2ltcG9ydCB7IGhhbmRsZUJpZ0ltYWdlQXBwZWFyIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FsbGJhY2ssXHJcbiAgICBzZWxlY3RvcixcclxuICAgIGhhbmRsZVRyYXNoQnV0dG9uLFxyXG4gICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YS50aXRsZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS51cmw7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gY2FsbGJhY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVUcmFzaEJ1dHRvbiA9IGhhbmRsZVRyYXNoQnV0dG9uO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrID0gaGFuZGxlTGlrZUJ1dHRvbkNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2FkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3RyYXNoLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3BsYWNlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcGxhY2UtbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtX19saWtlcy1udW1iZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcGxhY2VcIikuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcGxhY2UtaW5mby1uYW1lXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fdGl0bGU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcGxhY2VcIikuYWx0ID0gdGhpcy5fdGl0bGU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENhcmQ7XHJcbiIsImV4cG9ydHMuYWRkTmV3UGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydHMucHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2luZm8tZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnRzLmF2YXRhckVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydHMuYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1jb250YWluZXJcIik7XHJcbmV4cG9ydHMuZm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fQnV0dG9uXCIpO1xyXG5leHBvcnRzLmZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpO1xyXG5leHBvcnRzLnBsYWNlc1NlbGVjdG9yID0gXCIuZ2FsbGVyeVwiO1xyXG5leHBvcnRzLnByb2ZpbGVTZWxlY3RvciA9IFwiLnByb2ZpbGVfX2luZm9cIjtcclxuIiwiZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XHJcbiAgcG9wdXAub3BlbigpO1xyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gb3BlblBvcHVwO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgXCIuLi9pbWFnZXMvSGVhZGVybG9nby1taW4uc3ZnXCI7XHJcbmNvbnN0IGNvbnN0YW50ZXMgPSByZXF1aXJlKFwiLi4vY29uc3RcIik7XHJcbmNvbnN0IFNlY3Rpb24gPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCIpO1xyXG5jb25zdCBDYXJkID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvY2FyZFwiKTtcclxuY29uc3Qgb3BlblBvcHVwID0gcmVxdWlyZShcIi4uL3V0aWxzL3V0aWxzXCIpO1xyXG5jb25zdCBGb3JtVmFsaWRhdG9yID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiKTtcclxuY29uc3QgUG9wdXBXaXRoSW1hZ2UgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiKTtcclxuY29uc3QgUG9wdXBXaXRoRm9ybSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIik7XHJcbmNvbnN0IFVzZXJJbmZvID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIik7XHJcbmNvbnN0IEFwaSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL0FwaVwiKTtcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBQcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX19pbmZvLW5hbWVcIixcclxuICBcIi5wcm9maWxlX19pbmZvLW9jY3VwYXRpb25cIixcclxuICBcIi5wcm9maWxlX19hdmF0YXItY29udGFpbmVyXCJcclxuKTtcclxuXHJcbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKGpzb24pID0+IHtcclxuICBQcm9maWxlSW5mby5zZXRVc2VySW5mbyhqc29uKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBpdGVtLFxyXG4gICAgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCBiaWdJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlLWltYWdlXCIpO1xyXG4gICAgICBiaWdJbWFnZS5vcGVuKGV2dCk7XHJcbiAgICB9LFxyXG4gICAgXCIudGVtcGxhdGVfX3BsYWNlXCIsXHJcbiAgICAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbGV0ZUNhcmRBc2tQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICAgICAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLWRlbGV0ZS1jYXJkLWFza1wiLFxyXG4gICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcclxuICAgICAgICAgIGFwaS5oYW5kbGVEZWxldGVDYXJkKGl0ZW0uX2lkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIG9wZW5Qb3B1cChkZWxldGVDYXJkQXNrUG9wdXBGb3JtKTtcclxuICAgIH0sXHJcbiAgICAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IElMaWtlID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIlxyXG4gICAgICApO1xyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIGNvbnN0IHVuTGlrZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB1bkxpa2UgPSBhcGkuaGFuZGxlVW5MaWtlQ2xpY2soaXRlbS5faWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgIFwiLml0ZW1fX2xpa2VzLW51bWJlclwiXHJcbiAgICAgICAgICApLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdW5MaWtlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbGlrZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBsaWtlID0gYXBpLmhhbmRsZUxpa2VDbGljayhpdGVtLl9pZCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgXCIuaXRlbV9fbGlrZXMtbnVtYmVyXCJcclxuICAgICAgICAgICkudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBsaWtlO1xyXG4gICAgICB9O1xyXG4gICAgICBJTGlrZSA/IHVuTGlrZSgpIDogbGlrZSgpO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG4vL1BhcmEgbHVnYXJlcyBpbmljaWFsZXNcclxuY29uc3QgcGxhY2VzTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBvd25lcklkID0gXCIwMDZmMzA4N2E4ZTE4NTExZGQ4NjU2YjhcIjtcclxuICAgICAgY29uc3QgSUxpa2UgPSBpdGVtLmxpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gZWxlbWVudC5faWQgPT09IG93bmVySWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBvd25lciA9IGl0ZW0ub3duZXIuX2lkID09PSBvd25lcklkO1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBjb25zdCBpdGVtQ2FyZCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbVwiKTtcclxuICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgICAgY29uc3QgaGVhcnRCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3BsYWNlLWxpa2UtYnV0dG9uXCIpO1xyXG4gICAgICBpZiAob3duZXIpIHtcclxuICAgICAgICBwbGFjZXNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW1DYXJkLnJlbW92ZUNoaWxkKHRyYXNoQnV0dG9uKTtcclxuICAgICAgICBwbGFjZXNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChJTGlrZSkge1xyXG4gICAgICAgIGhlYXJ0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxuICBjb25zdGFudGVzLnBsYWNlc1NlbGVjdG9yXHJcbik7XHJcblxyXG5jb25zdCByZXN1bHQgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoanNvbikgPT4ge1xyXG4gIGNvbnN0IGNhcmRzID0ganNvbi5tYXAoKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiB7IC4uLml0ZW0sIHRpdGxlOiBpdGVtLm5hbWUsIHVybDogaXRlbS5saW5rIH07XHJcbiAgfSk7XHJcbiAgcGxhY2VzTGlzdC5zZXRJdGVtcyhjYXJkcyk7XHJcbiAgcGxhY2VzTGlzdC5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxuXHJcbi8vLy8vL051ZXZhIGluc3RhbmNpYSBkZSBQb3BVcEZvcm0gcGFyYSBlbCBwZXJmaWxcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLW5ldy1wcm9maWxlXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBwcm9maWxlVmFsdWVzID0gYXBpLmhhbmRsZUVkaXRQcm9maWxlKHZhbHVlKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgYXBpLmdldFVzZXJJbmZvKCkudGhlbigoanNvbikgPT4ge1xyXG4gICAgICAgIFByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKGpzb24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8vLy8vLy9cclxuLy8vLy8vTnVldmEgaW5zdGFuY2lhIGRlIFBvcFVwRm9ybSBwYXJhIGVsIGx1Z2FyXHJcblxyXG5jb25zdCBwbGFjZVBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLWZvcm0tbmV3LXBsYWNlXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkVmFsdWVzID0gYXBpLmhhbmRsZUFkZENhcmQodmFsdWUpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChcclxuICAgICAgICB7IC4uLnJlcywgdGl0bGU6IHJlcy5uYW1lLCB1cmw6IHJlcy5saW5rIH0sXHJcbiAgICAgICAgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZS1pbWFnZVwiKTtcclxuICAgICAgICAgIGJpZ0ltYWdlLm9wZW4oZXZ0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiLnRlbXBsYXRlX19wbGFjZVwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgY29uc3QgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uc3RhbnRlcy5wbGFjZXNTZWxlY3Rvcik7XHJcbiAgICAgIGdhbGxlcnkucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vLy9pbnRhbmNpYSBwYXJhIGNhbWJpYXIgZGUgYXZhdGFyXHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLWNoYW5nZS1wcm9maWxlLWF2YXRhclwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICh2YWx1ZSkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5oYW5kbGVDaGFuZ2VBdmF0YXIodmFsdWUpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdGFudGVzLmF2YXRhckltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt2YWx1ZS5hdmF0YXJ9KWA7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZS1mb3JtLWNoYW5nZS1wcm9maWxlLWF2YXRhclwiKVxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fQnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9DcmVhIHVuYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgRm9ybVZhbGlkYXRvciBwYXJhIGNhZGEgZm9ybXVsYXJpbyBxdWUgZGViYSBzZXIgdmFsaWRhZG8uRk9SRUFDSFxyXG5jb25zdGFudGVzLmZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcclxuICBjb25zdCB2YWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAge1xyXG4gICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICAgIH0sXHJcbiAgICBmb3JtXHJcbiAgKTtcclxuICB2YWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gb3BlblBsYWNlRm9ybVBvcHVwKCkge1xyXG4gIG9wZW5Qb3B1cChwbGFjZVBvcHVwRm9ybSk7XHJcbn1cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVGb3JtUG9wdXAoKSB7XHJcbiAgb3BlblBvcHVwKHByb2ZpbGVQb3B1cEZvcm0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUXVlc3Rpb25Gb3JtUG9wdXAoKSB7XHJcbiAgb3BlblBvcHVwKGNoYW5nZUF2YXRhclBvcHVwRm9ybSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gIGNvbnN0YW50ZXMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRm9ybVBvcHVwKTtcclxuICBjb25zdGFudGVzLmFkZE5ld1BsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUGxhY2VGb3JtUG9wdXApO1xyXG4gIGNvbnN0YW50ZXMuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblF1ZXN0aW9uRm9ybVBvcHVwKTtcclxufVxyXG5cclxuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuIl0sIm5hbWVzIjpbIkFwaSIsIm9wdGlvbnMiLCJ0aGlzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidmFsdWUiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJub21icmUiLCJhYm91dCIsIm9jdXBhY2nDs24iLCJ0aXRsZSIsImxpbmsiLCJpbWFnZSIsImNhcmRJZCIsImF2YXRhciIsIm1vZHVsZSIsImV4cG9ydHMiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJidXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiZXZ0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImNsYXNzTGlzdCIsImFkZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfYWJsZUJ1dHRvbiIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwic29tZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUNsb3NlQnV0dG9uIiwiYmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVUYXAiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjb25zb2xlIiwibG9nIiwiY2xvc2UiLCJ0YXAiLCJ0YXJnZXQiLCJjb250YWlucyIsImJ1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInJlcXVpcmUiLCJQb3B1cFdpdGhJbWFnZSIsInNyYyIsImltYWdlRGVzY3JpcHRpb24iLCJpbWFnZUxlZ2VuZCIsImFsdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9yZW5kZXJlZEl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZGF0YSIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZVNlbGVjdG9yIiwiX3VzZXJKb2JTZWxlY3RvciIsIl91c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWVDb250YWluZXIiLCJfdXNlckpvYkNvbnRhaW5lciIsIl91c2VyQXZhdGFyQ29udGFpbmVyIiwiam9iIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJDYXJkIiwiY2FsbGJhY2siLCJzZWxlY3RvciIsImhhbmRsZVRyYXNoQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2RhdGEiLCJfdGl0bGUiLCJfaW1hZ2UiLCJ1cmwiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b25DbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9hZGRFdmVudExpc3RlbmVycyIsImxpa2VzIiwibGVuZ3RoIiwiYWRkTmV3UGxhY2VCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsImF2YXRhckVkaXRCdXR0b24iLCJhdmF0YXJJbWFnZSIsImZvcm1CdXR0b24iLCJmb3JtcyIsInBsYWNlc1NlbGVjdG9yIiwicHJvZmlsZVNlbGVjdG9yIiwicG9wdXAiLCJvcGVuIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJjb25zdGFudGVzIiwib3BlblBvcHVwIiwiYXBpIiwiYmFzZVVybCIsIlByb2ZpbGVJbmZvIiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmRBc2tQb3B1cEZvcm0iLCJoYW5kbGVEZWxldGVDYXJkIiwiX2lkIiwicGFyZW50RWxlbWVudCIsIklMaWtlIiwidG9nZ2xlIiwiaGFuZGxlVW5MaWtlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicGxhY2VzTGlzdCIsIm93bmVySWQiLCJvd25lciIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiaXRlbUNhcmQiLCJ0cmFzaEJ1dHRvbiIsImhlYXJ0QnV0dG9uIiwicmVtb3ZlQ2hpbGQiLCJhZGRJdGVtIiwicHJvZmlsZVBvcHVwRm9ybSIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwibWFwIiwic2V0SXRlbXMiLCJyZW5kZXJJdGVtcyIsImhhbmRsZUVkaXRQcm9maWxlIiwicGxhY2VQb3B1cEZvcm0iLCJoYW5kbGVBZGRDYXJkIiwiY2hhbmdlQXZhdGFyUG9wdXBGb3JtIiwiaGFuZGxlQ2hhbmdlQXZhdGFyIiwiZmluYWxseSIsImZvcm0iLCJmb3JtU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==