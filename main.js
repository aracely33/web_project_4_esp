!function(){var t={953:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me",{headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"getInitialCards",value:function(){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards",{headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleEditProfile",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me",{method:"PATCH",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t.nombre),about:"".concat(t.ocupaciÃ³n)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleAddCard",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards ",{method:"POST",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({name:"".concat(t.title),link:"".concat(t.image)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleDeleteCard",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/".concat(t),{method:"DELETE",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleLikeClick",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/likes/".concat(t),{method:"PUT",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleUnLikeClick",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/cards/likes/".concat(t),{method:"DELETE",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a"}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}},{key:"handleChangeAvatar",value:function(t){return fetch("https://around.nomoreparties.co/v1/web_es_cohort_02/users/me/avatar",{method:"PATCH",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"},body:JSON.stringify({avatar:"".concat(t.avatar)})}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status))}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},383:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n}var e,r;return e=t,(r=[{key:"_setEventListeners",value:function(t,e){var n=this;this._formElement=t,this._config=e;var r=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),o=t.querySelector(this._config.submitButtonSelector);this._toggleButtonState(r,o,this._config),this._formElement.addEventListener("reset",(function(){setTimeout((function(){n._toggleButtonState(r,o,n._config)}),0)})),r.forEach((function(t){t.addEventListener("input",(function(e){n._checkInputValidity(n._formElement,t),n._toggleButtonState(r,o,n._config)}))}))}},{key:"_disableButton",value:function(t,e){t.classList.add(e.inactiveButtonClass),t.setAttribute("disabled",!0)}},{key:"_ableButton",value:function(t,e){t.classList.remove(e.inactiveButtonClass),t.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(t,e,n){this._hasInvalidInput(t)?this._disableButton(e,n):this._ableButton(e,n)}},{key:"_checkInputValidity",value:function(t,e){e.validity.valid?this._hideInputError(t,e,this._config):this._showInputError(t,e,e.validationMessage,this._config)}},{key:"_showInputError",value:function(t,e,n,r){var o=t.querySelector(".".concat(e.id,"-error"));e.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)}},{key:"_hideInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(n.inputErrorClass),r.classList.remove(n.errorClass),r.textContent=""}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners(this._formElement,this._config)}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},4:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=e,this._popupElement=document.querySelector(this._popup),this._handleCloseButton=this._handleCloseButton.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._handleTap=this._handleTap.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this.setEventListeners()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleTap),document.removeEventListener("click",this._handleCloseButton)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&(this._popupElement=document.querySelector(".popup_opened"),this.close())}},{key:"_handleTap",value:function(t){var e=t.target.classList.contains("popup");this._popupElement=t.target,e&&this.close()}},{key:"_handleCloseButton",value:function(t){var e=t.target.classList.contains("close-button");this._popupElement=document.querySelector(".popup_opened"),e&&this.close()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleTap),document.addEventListener("click",this._handleCloseButton)}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},1:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=u(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},i.apply(this,arguments)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,t);var e,n,r,u,f=(r=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(u){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function p(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,n))._formElement=e._popupElement.querySelector(".form"),e._handleFormSubmit=r,e._popupFormSubmit=e._popupFormSubmit.bind(l(e)),e}return e=p,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._formElement.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"_popupFormSubmit",value:function(t){t.preventDefault(),t.target.querySelector(".form__Button").textContent="Guardando...",this._handleFormSubmit(this._getInputValues()),this._formElement.reset(),t.target.querySelector(".form__Button").textContent="Guardar",this.close()}},{key:"setEventListeners",value:function(){i(s(p.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._popupFormSubmit)}},{key:"close",value:function(){this._formElement.removeEventListener("submit",this._popupFormSubmit),i(s(p.prototype),"close",this).call(this)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(n(4));t.exports=f},584:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=a(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},u.apply(this,arguments)}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,t);var e,n,r,a,f=(r=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(r);if(a){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return l(this,t)});function p(){return o(this,p),f.apply(this,arguments)}return e=p,(n=[{key:"open",value:function(t){this._popupElement.querySelector(".popup__image").src=t.target.src;var e=this._popupElement.querySelector(".popup__imagedescription"),n=t.target.alt;e.textContent=n,u(s(p.prototype),"open",this).call(this)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(n(4));t.exports=f},411:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,r;return e=t,(r=[{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"setItems",value:function(t){this._renderedItems=t}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},840:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameSelector=e,this._userJobSelector=n,this._userAvatarSelector=r,this._userNameContainer=document.querySelector(this._userNameSelector),this._userJobContainer=document.querySelector(this._userJobSelector),this._userAvatarContainer=document.querySelector(this._userAvatarSelector)}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{name:this._userNameContainer.textContent,job:this._userJobContainer.textContent,avatar:this._userAvatarContainer.style.backgroundImage}}},{key:"setUserInfo",value:function(t){this._userNameContainer.textContent=t.name,this._userJobContainer.textContent=t.about,this._userAvatarContainer.style.backgroundImage="url(".concat(t.avatar,")")}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},177:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._title=e.title,this._image=e.url,this._handleCardClick=n,this._handleTrashButton=r,this._handleLikeButtonClick=o}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(".template__place").content.cloneNode(!0)}},{key:"_addEventListeners",value:function(){this._element=this._getTemplate(),this._element.querySelector(".item__trash-button").addEventListener("click",this._handleTrashButton),this._element.querySelector(".item__place").addEventListener("click",this._handleCardClick),this._element.querySelector(".item__place-like-button").addEventListener("click",this._handleLikeButtonClick)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._addEventListeners(),this._element.querySelector(".item__likes-number").textContent=this._data.likes.length,this._element.querySelector(".item__place").src=this._image,this._element.querySelector(".item__place-info-name").textContent=this._title,this._element.querySelector(".item__place").alt=this._title,this._element}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=r},575:function(t,e){e.addNewPlaceButton=document.querySelector(".profile__add-button"),e.profileEditButton=document.querySelector(".profile__info-edit-button"),e.avatarEditButton=document.querySelector(".profile__avatar-edit-button"),e.avatarImage=document.querySelector(".profile__avatar-container"),e.formButton=document.querySelector(".form__Button"),e.forms=document.querySelectorAll(".form"),e.placesSelector=".gallery",e.profileSelector=".profile__info"},209:function(t){t.exports=function(t){t.open()}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.p="",function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,n,r){return(n=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}n.p;var i=n(575),u=n(411),a=n(177),c=n(209),l=n(383),s=n(584),f=n(1),p=n(840),y=new(n(953))({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_02",headers:{authorization:"38be44b0-e909-4575-ba93-d677e497f17a","Content-Type":"application/json"}}),m=new p(".profile__info-name",".profile__info-occupation",".profile__avatar-container");function h(t){return new a(t,(function(t){new s(".popup_type-image").open(t)}),(function(e){var n=new f({popupSelector:".popup_type-form-delete-card-ask",handleFormSubmit:function(){y.handleDeleteCard(t._id).then((function(t){e.target.parentElement.remove()}))}});c(n)}),(function(e){var n=e.target.classList.contains("item__place-like-button_active");e.target.classList.toggle("item__place-like-button_active"),n?y.handleUnLikeClick(t._id).then((function(t){e.target.parentElement.querySelector(".item__likes-number").textContent=t.likes.length})):y.handleLikeClick(t._id).then((function(t){e.target.parentElement.querySelector(".item__likes-number").textContent=t.likes.length}))}))}y.getUserInfo().then((function(t){m.setUserInfo(t)}));var b=new u({renderer:function(t){var e="006f3087a8e18511dd8656b8",n=t.likes.some((function(t){return t._id===e})),r=t.owner._id===e,o=h(t).generateCard(),i=o.querySelector(".item"),u=o.querySelector(".item__trash-button"),a=o.querySelector(".item__place-like-button");r||i.removeChild(u),b.addItem(o),n&&a.classList.add("item__place-like-button_active")}},i.placesSelector),d=(y.getInitialCards().then((function(t){var e=t.map((function(t){return r(r({},t),{},{title:t.name,url:t.link})}));b.setItems(e),b.renderItems()})),new f({popupSelector:".popup_type-form-new-profile",handleFormSubmit:function(t){y.handleEditProfile(t).then((function(t){y.getUserInfo().then((function(t){m.setUserInfo(t)}))}))}})),v=new f({popupSelector:".popup_type-form-new-place",handleFormSubmit:function(t){y.handleAddCard(t).then((function(t){var e=h(r(r({},t),{},{title:t.name,url:t.link})).generateCard();document.querySelector(i.placesSelector).prepend(e)}))}}),_=new f({popupSelector:".popup_type-form-change-profile-avatar",handleFormSubmit:function(t){y.handleChangeAvatar(t).then((function(e){i.avatarImage.style.backgroundImage="url(".concat(t.avatar,")")})).finally((function(){document.querySelector(".popup_type-form-change-profile-avatar").querySelector(".form__Button").textContent="Guardar"}))}});i.forms.forEach((function(t){new l({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t).enableValidation()})),i.profileEditButton.addEventListener("click",(function(){c(d)})),i.addNewPlaceButton.addEventListener("click",(function(){c(v)})),i.avatarEditButton.addEventListener("click",(function(){c(_)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU16RyxTQUFRLFNBQUMySixHQUNQLElBQUkzSyxFQUNuQixDQUNFNEssYUFBYyxlQUNkbkssY0FBZSxnQkFDZkcscUJBQXNCLGlCQUN0QlUsb0JBQXFCLHlCQUNyQmUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx3QkFFZG9JLEdBRU9FLGtCQUNYLElBY0V4QyxFQUFXaEIsa0JBQWtCdkcsaUJBQWlCLFNBVGhELFdBQ0V3SCxFQUFVeUIsRUFDWixJQVFFMUIsRUFBV2pCLGtCQUFrQnRHLGlCQUFpQixTQWJoRCxXQUNFd0gsRUFBVWdDLEVBQ1osSUFZRWpDLEVBQVdmLGlCQUFpQnhHLGlCQUFpQixTQVAvQyxXQUNFd0gsRUFBVWtDLEVBQ1osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb25zdC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFQSSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wMi91c2Vycy9tZVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvY2FyZHNcIiwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdHJvcyBtw6l0b2RvcyBwYXJhIHRyYWJhamFyIGNvbiBsYSBBUElcclxuXHJcbiAgaGFuZGxlRWRpdFByb2ZpbGUodmFsdWUpIHtcclxuICAgIHJldHVybiBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvdXNlcnMvbWVcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIGF1dGhvcml6YXRpb246IFwiMzhiZTQ0YjAtZTkwOS00NTc1LWJhOTMtZDY3N2U0OTdmMTdhXCIsXHJcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGAke3ZhbHVlLm5vbWJyZX1gLFxyXG4gICAgICAgICAgYWJvdXQ6IGAke3ZhbHVlLm9jdXBhY2nDs259YCxcclxuICAgICAgICB9KSxcclxuICAgICAgfVxyXG4gICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQWRkQ2FyZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzIFwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogYCR7dmFsdWUudGl0bGV9YCxcclxuICAgICAgICBsaW5rOiBgJHt2YWx1ZS5pbWFnZX1gLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzLyR7Y2FyZElkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlQ2xpY2soY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goXHJcbiAgICAgIGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCxcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgICkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVVuTGlrZUNsaWNrKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAyL2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIzOGJlNDRiMC1lOTA5LTQ1NzUtYmE5My1kNjc3ZTQ5N2YxN2FcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVDaGFuZ2VBdmF0YXIodmFsdWUpIHtcclxuICAgIHJldHVybiBmZXRjaChcclxuICAgICAgXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDIvdXNlcnMvbWUvYXZhdGFyXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIjM4YmU0NGIwLWU5MDktNDU3NS1iYTkzLWQ2NzdlNDk3ZjE3YVwiLFxyXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhdmF0YXI6IGAke3ZhbHVlLmF2YXRhcn1gLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICB9XHJcbiAgICApLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFQSTtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vVGllbmUgbcOpdG9kb3MgcHJpdmFkb3MgcGFyYTpcclxuICAvL2FncmVnYXIgdG9kb3MgbG9zIGNvbnRyb2xhZG9yZXMgbmVjZXNhcmlvcy4qKioqKioqKioqXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG5cclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHRoaXMuX2NvbmZpZyk7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgLy8gJ3NldFRpbWVvdXQnIGVzIG5lY2VzYXJpbyBwYXJhIGVzcGVyYXIgYSBxdWUgc2UgYm9ycmUgZWwgZm9ybXVsYXJpbyAobGEgbGxhbWFkYSBkZXNhcGFyZWNlcsOhIGFsIGZpbmFsIGRlIGxhIHBpbGEpIHkgc29sbyBlbnRvbmNlcyBsbGFtYXIgYSBgdG9nZ2xlQnV0dG9uU3RhdGVgXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICAgICAgfSwgMCk7IC8vIGJhc3RhIGNvbiBlc3BlY2lmaWNhciAwIG1pbGlzZWd1bmRvcyBwYXJhIHF1ZSBkZXNwdcOpcyBkZSBgcmVzZXRgIHNlIGFjdGl2ZSBsYSBhY2Npw7NuXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eSh0aGlzLl9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHRoaXMuX2NvbmZpZyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL2NhbWJpYXIgZWwgZXN0YWRvIGRlbCBib3TDs24gU3VibWl0KioqKioqKioqKipcclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIF9hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL2NvbXByb2JhciBsYSB2YWxpZGV6IGRlbCBjYW1wbyoqKioqKioqKioqKipcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKFxyXG4gICAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICAgIGlucHV0RWxlbWVudCxcclxuICAgICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXHJcbiAgICAgICAgdGhpcy5fY29uZmlnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIC8vQWN0aXZhciBsYSB2YWxpZGFjacOzblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtRWxlbWVudCwgdGhpcy5fY29uZmlnKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXApO1xyXG4gICAgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24gPSB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5faGFuZGxlVGFwID0gdGhpcy5faGFuZGxlVGFwLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVRhcCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xyXG4gIH1cclxuXHJcbiAgLyphbG1hY2VuYSBsYSBsw7NnaWNhIHBhcmEgY2VycmFyIGVsIHBvcHVwIGFsIHB1bHNhciBsYSB0ZWNsYSBFc2MuKi9cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyphbG1hY2VuYSBsYSBsw7NnaWNhIHBhcmEgY2VycmFyIGVsIHBvcHVwIGFsIHB1bHNhciB0YXAgZW4gbGEgc3VwZXJwb3NpY2nDs24uKi9cclxuXHJcbiAgX2hhbmRsZVRhcChldnQpIHtcclxuICAgIGNvbnN0IHRhcCA9IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIik7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBldnQudGFyZ2V0O1xyXG4gICAgaWYgKHRhcCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2xvc2VCdXR0b24oZXZ0KSB7XHJcbiAgICBjb25zdCBidXR0b24gPSBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImNsb3NlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfb3BlbmVkXCIpO1xyXG5cclxuICAgIGlmIChidXR0b24pIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9xdWUgYWdyZWdhIHVuIGRldGVjdG9yIGRlIGV2ZW50b3MgZGUgY2xpY2sgYWwgaWNvbm8gY2VycmFyIGRlbCBwb3B1cFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVRhcCk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xvc2VCdXR0b24pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQb3B1cDtcclxuIiwiY29uc3QgUG9wdXAgPSByZXF1aXJlKFwiLi9Qb3B1cFwiKTtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgLy9sbGV2YSB1biBjYWxsYmFjayBkZWwgZW52w61vIGRlbCBmb3JtdWxhcmlvIGFsIGNvbnN0cnVjdG9yLCBhc8OtIGNvbW8gZWwgc2VsZWN0b3IgcG9wdXAuXHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1TdWJtaXQgPSB0aGlzLl9wb3B1cEZvcm1TdWJtaXQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcclxuICAgICAgKGlucHV0KSA9PiAodGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgX3BvcHVwRm9ybVN1Ym1pdChldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX0J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiR3VhcmRhbmRvLi4uXCI7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX0J1dHRvblwiKS50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xyXG5cclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fcG9wdXBGb3JtU3VibWl0KTtcclxuICB9XHJcblxyXG4gIC8vbW9kaWZpY2EgZWwgbcOpdG9kbyBwYWRyZSBjbG9zZSgpIHBhcmEgcmVpbmljaWFyICBlbCBmb3JtdWxhcmlvaGEgY3VhbmRvIGNlcnJhZG8gZWwgcG9wdXAuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3BvcHVwRm9ybVN1Ym1pdCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQb3B1cFdpdGhGb3JtO1xyXG4iLCIvL2ltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5jb25zdCBQb3B1cCA9IHJlcXVpcmUoXCIuL1BvcHVwXCIpO1xyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBvcGVuKGV2dCkge1xyXG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICBpbWFnZS5zcmMgPSBldnQudGFyZ2V0LnNyYztcclxuICAgIGNvbnN0IGltYWdlRGVzY3JpcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIucG9wdXBfX2ltYWdlZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICAgIGNvbnN0IGltYWdlTGVnZW5kID0gZXZ0LnRhcmdldC5hbHQ7XHJcbiAgICBpbWFnZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaW1hZ2VMZWdlbmQ7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvcHVwV2l0aEltYWdlO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHNldEl0ZW1zKGRhdGEpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTZWN0aW9uO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lU2VsZWN0b3IgPSB1c2VyTmFtZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fdXNlckpvYlNlbGVjdG9yID0gdXNlckpvYlNlbGVjdG9yO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhclNlbGVjdG9yID0gdXNlckF2YXRhclNlbGVjdG9yO1xyXG4gICAgdGhpcy5fdXNlck5hbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3VzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckpvYkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdXNlckpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl91c2VyQXZhdGFyU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lQ29udGFpbmVyLnRleHRDb250ZW50LFxyXG4gICAgICBqb2I6IHRoaXMuX3VzZXJKb2JDb250YWluZXIudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhckNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oaXRlbSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWVDb250YWluZXIudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XHJcbiAgICB0aGlzLl91c2VySm9iQ29udGFpbmVyLnRleHRDb250ZW50ID0gaXRlbS5hYm91dDtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXJDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2l0ZW0uYXZhdGFyfSlgO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVc2VySW5mbztcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FsbGJhY2ssIGhhbmRsZVRyYXNoQnV0dG9uLCBoYW5kbGVMaWtlQnV0dG9uQ2xpY2spIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fdGl0bGUgPSBkYXRhLnRpdGxlO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLnVybDtcclxuXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uID0gaGFuZGxlVHJhc2hCdXR0b247XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2sgPSBoYW5kbGVMaWtlQnV0dG9uQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnRlbXBsYXRlX19wbGFjZVwiKVxyXG4gICAgICAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fdHJhc2gtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlVHJhc2hCdXR0b24pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbV9fcGxhY2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5pdGVtX19wbGFjZS1saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX2xpa2VzLW51bWJlclwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2RhdGEubGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtX19wbGFjZVwiKS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtX19wbGFjZS1pbmZvLW5hbWVcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pdGVtX19wbGFjZVwiKS5hbHQgPSB0aGlzLl90aXRsZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQ2FyZDtcclxuIiwiZXhwb3J0cy5hZGROZXdQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0cy5wcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9faW5mby1lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydHMuYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fYXZhdGFyLWVkaXQtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0cy5hdmF0YXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWNvbnRhaW5lclwiKTtcclxuZXhwb3J0cy5mb3JtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19CdXR0b25cIik7XHJcbmV4cG9ydHMuZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1cIik7XHJcbmV4cG9ydHMucGxhY2VzU2VsZWN0b3IgPSBcIi5nYWxsZXJ5XCI7XHJcbmV4cG9ydHMucHJvZmlsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9faW5mb1wiO1xyXG4iLCJmdW5jdGlvbiBvcGVuUG9wdXAocG9wdXApIHtcclxuICBwb3B1cC5vcGVuKCk7XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBvcGVuUG9wdXA7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBcIi4uL2ltYWdlcy9IZWFkZXJsb2dvLW1pbi5zdmdcIjtcclxuY29uc3QgY29uc3RhbnRlcyA9IHJlcXVpcmUoXCIuLi9jb25zdFwiKTtcclxuY29uc3QgU2VjdGlvbiA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIik7XHJcbmNvbnN0IENhcmQgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9jYXJkXCIpO1xyXG5jb25zdCBvcGVuUG9wdXAgPSByZXF1aXJlKFwiLi4vdXRpbHMvdXRpbHNcIik7XHJcbmNvbnN0IEZvcm1WYWxpZGF0b3IgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yXCIpO1xyXG5jb25zdCBQb3B1cFdpdGhJbWFnZSA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCIpO1xyXG5jb25zdCBQb3B1cFdpdGhGb3JtID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiKTtcclxuY29uc3QgVXNlckluZm8gPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiKTtcclxuY29uc3QgQVBJID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvQVBJXCIpO1xyXG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMzhiZTQ0YjAtZTkwOS00NTc1LWJhOTMtZDY3N2U0OTdmMTdhXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IFByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG4gIFwiLnByb2ZpbGVfX2luZm8tbmFtZVwiLFxyXG4gIFwiLnByb2ZpbGVfX2luZm8tb2NjdXBhdGlvblwiLFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhci1jb250YWluZXJcIlxyXG4pO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigoanNvbikgPT4ge1xyXG4gIFByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKGpzb24pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0sXHJcbiAgICAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGJpZ0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGUtaW1hZ2VcIik7XHJcbiAgICAgIGJpZ0ltYWdlLm9wZW4oZXZ0KTtcclxuICAgIH0sXHJcbiAgICAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbGV0ZUNhcmRBc2tQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICAgICAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLWRlbGV0ZS1jYXJkLWFza1wiLFxyXG4gICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcclxuICAgICAgICAgIGFwaS5oYW5kbGVEZWxldGVDYXJkKGl0ZW0uX2lkKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIG9wZW5Qb3B1cChkZWxldGVDYXJkQXNrUG9wdXBGb3JtKTtcclxuICAgIH0sXHJcbiAgICAoZXZ0KSA9PiB7XHJcbiAgICAgIGNvbnN0IElMaWtlID0gZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXHJcbiAgICAgICAgXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIlxyXG4gICAgICApO1xyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIGNvbnN0IHVuTGlrZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB1bkxpa2UgPSBhcGkuaGFuZGxlVW5MaWtlQ2xpY2soaXRlbS5faWQpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgZXZ0LnRhcmdldC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgIFwiLml0ZW1fX2xpa2VzLW51bWJlclwiXHJcbiAgICAgICAgICApLnRleHRDb250ZW50ID0gcmVzLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdW5MaWtlO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgbGlrZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBsaWtlID0gYXBpLmhhbmRsZUxpa2VDbGljayhpdGVtLl9pZCkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgXCIuaXRlbV9fbGlrZXMtbnVtYmVyXCJcclxuICAgICAgICAgICkudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBsaWtlO1xyXG4gICAgICB9O1xyXG4gICAgICBJTGlrZSA/IHVuTGlrZSgpIDogbGlrZSgpO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG4vL1BhcmEgbHVnYXJlcyBpbmljaWFsZXNcclxuY29uc3QgcGxhY2VzTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBvd25lcklkID0gXCIwMDZmMzA4N2E4ZTE4NTExZGQ4NjU2YjhcIjtcclxuICAgICAgY29uc3QgSUxpa2UgPSBpdGVtLmxpa2VzLnNvbWUoKGVsZW1lbnQpID0+IHtcclxuICAgICAgICByZXR1cm4gZWxlbWVudC5faWQgPT09IG93bmVySWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBvd25lciA9IGl0ZW0ub3duZXIuX2lkID09PSBvd25lcklkO1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBjb25zdCBpdGVtQ2FyZCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbVwiKTtcclxuICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgICAgY29uc3QgaGVhcnRCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLml0ZW1fX3BsYWNlLWxpa2UtYnV0dG9uXCIpO1xyXG4gICAgICBpZiAob3duZXIpIHtcclxuICAgICAgICBwbGFjZXNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGl0ZW1DYXJkLnJlbW92ZUNoaWxkKHRyYXNoQnV0dG9uKTtcclxuICAgICAgICBwbGFjZXNMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChJTGlrZSkge1xyXG4gICAgICAgIGhlYXJ0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJpdGVtX19wbGFjZS1saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSxcclxuICBjb25zdGFudGVzLnBsYWNlc1NlbGVjdG9yXHJcbik7XHJcblxyXG5jb25zdCByZXN1bHQgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoanNvbikgPT4ge1xyXG4gIGNvbnN0IGNhcmRzID0ganNvbi5tYXAoKGl0ZW0pID0+IHtcclxuICAgIHJldHVybiB7IC4uLml0ZW0sIHRpdGxlOiBpdGVtLm5hbWUsIHVybDogaXRlbS5saW5rIH07XHJcbiAgfSk7XHJcbiAgcGxhY2VzTGlzdC5zZXRJdGVtcyhjYXJkcyk7XHJcbiAgcGxhY2VzTGlzdC5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxuXHJcbi8vLy8vL051ZXZhIGluc3RhbmNpYSBkZSBQb3BVcEZvcm0gcGFyYSBlbCBwZXJmaWxcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLW5ldy1wcm9maWxlXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBwcm9maWxlVmFsdWVzID0gYXBpLmhhbmRsZUVkaXRQcm9maWxlKHZhbHVlKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgYXBpLmdldFVzZXJJbmZvKCkudGhlbigoanNvbikgPT4ge1xyXG4gICAgICAgIFByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKGpzb24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8vLy8vLy9cclxuLy8vLy8vTnVldmEgaW5zdGFuY2lhIGRlIFBvcFVwRm9ybSBwYXJhIGVsIGx1Z2FyXHJcblxyXG5jb25zdCBwbGFjZVBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cF90eXBlLWZvcm0tbmV3LXBsYWNlXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkVmFsdWVzID0gYXBpLmhhbmRsZUFkZENhcmQodmFsdWUpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChcclxuICAgICAgICB7IC4uLnJlcywgdGl0bGU6IHJlcy5uYW1lLCB1cmw6IHJlcy5saW5rIH0sXHJcbiAgICAgICAgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgYmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZS1pbWFnZVwiKTtcclxuICAgICAgICAgIGJpZ0ltYWdlLm9wZW4oZXZ0KTtcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgY29uc3QgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uc3RhbnRlcy5wbGFjZXNTZWxlY3Rvcik7XHJcbiAgICAgIGdhbGxlcnkucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vLy9pbnRhbmNpYSBwYXJhIGNhbWJpYXIgZGUgYXZhdGFyXHJcblxyXG5jb25zdCBjaGFuZ2VBdmF0YXJQb3B1cEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXBfdHlwZS1mb3JtLWNoYW5nZS1wcm9maWxlLWF2YXRhclwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICh2YWx1ZSkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5oYW5kbGVDaGFuZ2VBdmF0YXIodmFsdWUpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdGFudGVzLmF2YXRhckltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt2YWx1ZS5hdmF0YXJ9KWA7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkb2N1bWVudFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZS1mb3JtLWNoYW5nZS1wcm9maWxlLWF2YXRhclwiKVxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fQnV0dG9uXCIpLnRleHRDb250ZW50ID0gXCJHdWFyZGFyXCI7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy9DcmVhIHVuYSBpbnN0YW5jaWEgZGUgbGEgY2xhc2UgRm9ybVZhbGlkYXRvciBwYXJhIGNhZGEgZm9ybXVsYXJpbyBxdWUgZGViYSBzZXIgdmFsaWRhZG8uRk9SRUFDSFxyXG5jb25zdGFudGVzLmZvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcclxuICBjb25zdCB2YWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gICAge1xyXG4gICAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICAgIH0sXHJcbiAgICBmb3JtXHJcbiAgKTtcclxuICB2YWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gb3BlblBsYWNlRm9ybVBvcHVwKCkge1xyXG4gIG9wZW5Qb3B1cChwbGFjZVBvcHVwRm9ybSk7XHJcbn1cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVGb3JtUG9wdXAoKSB7XHJcbiAgb3BlblBvcHVwKHByb2ZpbGVQb3B1cEZvcm0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUXVlc3Rpb25Gb3JtUG9wdXAoKSB7XHJcbiAgb3BlblBvcHVwKGNoYW5nZUF2YXRhclBvcHVwRm9ybSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gIGNvbnN0YW50ZXMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRm9ybVBvcHVwKTtcclxuICBjb25zdGFudGVzLmFkZE5ld1BsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUGxhY2VGb3JtUG9wdXApO1xyXG4gIGNvbnN0YW50ZXMuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlblF1ZXN0aW9uRm9ybVBvcHVwKTtcclxufVxyXG5cclxuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuIl0sIm5hbWVzIjpbIkFQSSIsIm9wdGlvbnMiLCJ0aGlzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwidmFsdWUiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJub21icmUiLCJhYm91dCIsIm9jdXBhY2nDs24iLCJ0aXRsZSIsImxpbmsiLCJpbWFnZSIsImNhcmRJZCIsImF2YXRhciIsIm1vZHVsZSIsImV4cG9ydHMiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJidXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldFRpbWVvdXQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiZXZ0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImNsYXNzTGlzdCIsImFkZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfYWJsZUJ1dHRvbiIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwic29tZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUNsb3NlQnV0dG9uIiwiYmluZCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVUYXAiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsInRhcCIsInRhcmdldCIsImNvbnRhaW5zIiwiYnV0dG9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwicmVxdWlyZSIsIlBvcHVwV2l0aEltYWdlIiwic3JjIiwiaW1hZ2VEZXNjcmlwdGlvbiIsImltYWdlTGVnZW5kIiwiYWx0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJkYXRhIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lU2VsZWN0b3IiLCJfdXNlckpvYlNlbGVjdG9yIiwiX3VzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZUNvbnRhaW5lciIsIl91c2VySm9iQ29udGFpbmVyIiwiX3VzZXJBdmF0YXJDb250YWluZXIiLCJqb2IiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsIkNhcmQiLCJjYWxsYmFjayIsImhhbmRsZVRyYXNoQnV0dG9uIiwiaGFuZGxlTGlrZUJ1dHRvbkNsaWNrIiwiX2RhdGEiLCJfdGl0bGUiLCJfaW1hZ2UiLCJ1cmwiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQnV0dG9uIiwiX2hhbmRsZUxpa2VCdXR0b25DbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9hZGRFdmVudExpc3RlbmVycyIsImxpa2VzIiwibGVuZ3RoIiwiYWRkTmV3UGxhY2VCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsImF2YXRhckVkaXRCdXR0b24iLCJhdmF0YXJJbWFnZSIsImZvcm1CdXR0b24iLCJmb3JtcyIsInBsYWNlc1NlbGVjdG9yIiwicHJvZmlsZVNlbGVjdG9yIiwicG9wdXAiLCJvcGVuIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJjb25zdGFudGVzIiwib3BlblBvcHVwIiwiYXBpIiwiYmFzZVVybCIsIlByb2ZpbGVJbmZvIiwiY3JlYXRlQ2FyZCIsImRlbGV0ZUNhcmRBc2tQb3B1cEZvcm0iLCJoYW5kbGVEZWxldGVDYXJkIiwiX2lkIiwicGFyZW50RWxlbWVudCIsIklMaWtlIiwidG9nZ2xlIiwiaGFuZGxlVW5MaWtlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicGxhY2VzTGlzdCIsIm93bmVySWQiLCJvd25lciIsImNhcmRFbGVtZW50IiwiZ2VuZXJhdGVDYXJkIiwiaXRlbUNhcmQiLCJ0cmFzaEJ1dHRvbiIsImhlYXJ0QnV0dG9uIiwicmVtb3ZlQ2hpbGQiLCJhZGRJdGVtIiwicHJvZmlsZVBvcHVwRm9ybSIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwibWFwIiwic2V0SXRlbXMiLCJyZW5kZXJJdGVtcyIsImhhbmRsZUVkaXRQcm9maWxlIiwicGxhY2VQb3B1cEZvcm0iLCJoYW5kbGVBZGRDYXJkIiwiY2hhbmdlQXZhdGFyUG9wdXBGb3JtIiwiaGFuZGxlQ2hhbmdlQXZhdGFyIiwiZmluYWxseSIsImZvcm0iLCJmb3JtU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==